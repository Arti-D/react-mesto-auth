{"version":3,"sources":["logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Login.js","components/Register.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoTooltip.js","utils/api.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","location","useLocation","className","href","target","rel","alt","src","logoPath","pathname","to","isLoggedIn","email","onClick","onSignOut","CurrentUserContext","React","createContext","Card","card","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeStatus","link","name","onCardClick","url","title","type","onCardLike","length","onCardDelete","Main","userData","avatar","onEditAvatar","onEditProfile","aria-label","about","onAddPlace","cards","map","item","Login","useState","setEmail","password","setPassword","onSubmit","e","preventDefault","placeholder","onChange","value","Register","Footer","currentYear","Date","getFullYear","ImagePopup","onClose","PopupWithForm","isOpen","noValidate","children","buttonText","EditProfilePopup","userName","setName","description","setDescription","useEffect","onUpdateUser","id","minLength","maxLength","autoComplete","required","EditAvatarPopup","avatarLink","useRef","onUpdateAvatar","current","ref","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","InfoTooltip","statusClassName","isSuccessStatus","api","headers","this","_url","_headers","res","ok","json","Promise","reject","status","all","getUserInfo","getCards","fetch","method","credentials","then","_checkResponse","data","body","JSON","stringify","cardId","Accept","ProtectedRoute","Component","component","loggedIn","BASE_URL","checkResponse","withRouter","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setUserInfo","isRegisterSuccess","setIsRegisterSuccess","isInfoTooltipOpen","setIsInfoTooltipOpen","currentUserEmail","setCurrentUserEmail","setCards","updateUserInfo","getAllInfo","catch","err","console","log","closeAllPopups","setLoggedIn","history","push","useHistory","Provider","path","auth","finally","delLike","newCard","state","c","addLike","deleteCard","filter","newAvatar","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.19233ab1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import logoPath from \"../logo.svg\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\nfunction Header(props) {\r\n  const location = useLocation();\r\n\r\n  function signOut() {\r\n    props.onSignOut();\r\n  }\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <a\r\n        href=\"https://github.com/Arti-D/react-mesto-auth\"\r\n        target=\"_blank\"\r\n        className=\"header__logo-link\"\r\n        rel=\"noreferrer\"\r\n      >\r\n        <img className=\"header__logo\" alt=\"Логотип\" src={logoPath} />\r\n      </a>\r\n      {location.pathname === \"/signin\" && (\r\n        <Link to=\"/signup\" className=\"header__link\">\r\n          Регистрация\r\n        </Link>\r\n      )}\r\n      {location.pathname === \"/signup\" && (\r\n        <Link to=\"/signin\" className=\"header__link\">\r\n          Войти\r\n        </Link>\r\n      )}\r\n      {props.isLoggedIn && (\r\n        <div className=\"header__wrapp\">\r\n          <p className=\"header__email\">{props.email}</p>\r\n          <button onClick={signOut} className=\"header__button header__link\">\r\n            Выйти\r\n          </button>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nconst CurrentUserContext = React.createContext();\r\nexport default CurrentUserContext;\r\n","import CurrentUserContext from \"../contexts/CurrentUserContext.js\";\r\nimport React from 'react';\r\n\r\nfunction Card(props) {\r\n    \r\n    const card = props.card;\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const isOwn = card.owner === currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `elems__remove-btn ${isOwn ? 'elems__remove-btn_visible' : 'elems__remove-btn_hidden'}`\r\n      ); \r\n\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n    const cardLikeStatus = (\r\n        `elems__like ${isLiked ? 'elems__like_status_active' : ''}`\r\n    )\r\n\r\n    function handleLikeClick() {\r\n        props.onCardLike(card)\r\n    }\r\n\r\n    function handleCardClick() {\r\n      props.onCardClick({url: card.link, title: card.name});\r\n    }\r\n\r\n    function handleDeleteCard() {\r\n        props.onCardDelete(card)\r\n    }\r\n    return (\r\n        <li className=\"elems__item elem\">\r\n            <img src={card.link} alt={card.name} className=\"elems__img\" onClick={handleCardClick}/>\r\n            <div className=\"elems__wrapper\">\r\n                <h2 className=\"elems__title\">{card.name}</h2>\r\n                <div className=\"elems__like-wrapper\">\r\n                    <button type=\"button\" className={cardLikeStatus} onClick={handleLikeClick}></button>\r\n                    <p className=\"elems__number-of-likes\">{card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n            <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleDeleteCard}></button>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Card","import React from \"react\";\r\nimport Card from \"./Card.js\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext.js\";\r\n\r\nfunction Main(props) {\r\n  const userData = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__main\">\r\n          <div className=\"profile__avatar\">\r\n            <img\r\n              className=\"profile__avatar-img\"\r\n              src={userData.avatar}\r\n              alt={`аватар пользователя ${userData.name}`}\r\n            />\r\n            <button\r\n              className=\"profile__avatar-btn\"\r\n              type=\"button\"\r\n              onClick={props.onEditAvatar}\r\n            ></button>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__wrapper\">\r\n              <h1 className=\"profile__title\">{userData.name}</h1>\r\n              <button\r\n                onClick={props.onEditProfile}\r\n                aria-label=\"edit\"\r\n                title=\"edit\"\r\n                type=\"button\"\r\n                className=\"profile__edit-button\"\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{userData.about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"profile__add-button\"\r\n          onClick={props.onAddPlace}\r\n          aria-label=\"edit\"\r\n          title=\"add\"\r\n          type=\"button\"\r\n        ></button>\r\n      </section>\r\n      <section className=\"elems\">\r\n        <ul className=\"elems__list\">\r\n          {props.cards.map((item) => (\r\n              <Card\r\n                card={item}\r\n                onCardLike={props.onCardLike}\r\n                key={item._id}\r\n                onCardClick={props.onCardClick}\r\n                onCardDelete={props.onCardDelete}\r\n              ></Card>\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onSubmit(password, email);\r\n  }\r\n  function handleChangeEmail(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handleChangePassword(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"form\">\r\n      <h2 className=\"form__title\">Вход</h2>\r\n      <form className=\"form__content\" onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"email\"\r\n          className=\"form__input\"\r\n          placeholder=\"Email\"\r\n          onChange={handleChangeEmail}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          className=\"form__input\"\r\n          placeholder=\"Пароль\"\r\n          onChange={handleChangePassword}\r\n        />\r\n        <button type=\"submit\" className=\"form__submit-btn\">\r\n          Войти\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  function handleChangeEmail(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handleChangePassword(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onSubmit(password, email);\r\n  }\r\n\r\n  return (\r\n      <div className=\"form\">\r\n        <h2 className=\"form__title\">Регистрация</h2>\r\n        <form className=\"form__content\" onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form__input\"\r\n            placeholder=\"Email\"\r\n            onChange={handleChangeEmail}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            className=\"form__input\"\r\n            placeholder=\"Пароль\"\r\n            onChange={handleChangePassword}\r\n          />\r\n\r\n          <button className=\"form__submit-btn\">Зарегистрироваться</button>\r\n\r\n          <span className=\"form__question\">\r\n            Уже зарегестрированы?\r\n            <Link className=\"form__link\" to=\"/signin\">\r\n              Войти\r\n            </Link>\r\n          </span>\r\n        </form>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","function Footer() {\r\n  let currentYear = new Date().getFullYear()\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {currentYear} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function ImagePopup(props) {\r\n    return (\r\n    <div className={`popup popup-img ${props.card && 'popup_opened'}`}>\r\n    <div className=\"popup-img__content\">\r\n        <img src={props.card && props.card.url} alt={props.card && props.card.title} className=\"popup-img__picture\" />\r\n        <p className=\"popup-img__caption\">{props.card && props.card.title}</p>\r\n        <button type=\"button\" className=\"popup__close-btn\" onClick={props.onClose}></button>\r\n    </div>\r\n</div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup;","function PopupWithForm(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup-${props.name} ${props.isOpen && \"popup_opened\"}`}\r\n    >\r\n      <div className=\"popup__content\">\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form\r\n          name={props.name}\r\n          className={`popup__form popup__form_${props.name}`}\r\n          noValidate\r\n          onSubmit={props.onSubmit}\r\n        >\r\n          {props.children}\r\n          <button className={`popup__btn popup__btn_${props.name}`} type=\"submit\">\r\n            {props.buttonText}\r\n          </button>\r\n        </form>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close-btn\"\r\n          onClick={props.onClose}\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import PopupWithForm from './PopupWithForm.js';\r\nimport React from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext.js'\r\n\r\nfunction EditProfilePopup(props) {\r\n  const [userName, setName]= React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n    // console.log(userName);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n    // console.log(description);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser(userName, description)\r\n  }\r\n    return (\r\n        <PopupWithForm\r\n          name='edit'\r\n          title='Редактировать профиль'\r\n          isOpen={props.isOpen}\r\n          onClose={props.onClose}\r\n          onSubmit={handleSubmit}\r\n          buttonText='Сохранить'\r\n        >\r\n          <input\r\n            id=\"name-input\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            placeholder=\"Имя\"\r\n            className=\"popup__input popup__input_type_name\"\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            autoComplete=\"off\"\r\n            required\r\n            value={userName || ''}\r\n            onChange={handleChangeName}\r\n          />\r\n          <span id=\"name-input-error\" className=\"error\"></span>\r\n          <input\r\n            id=\"about-input\"\r\n            name=\"about\"\r\n            type=\"text\"\r\n            placeholder=\"О себе\"\r\n            className=\"popup__input popup__input_type_about\"\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            autoComplete=\"off\"\r\n            required\r\n            value={description || ''}\r\n            onChange={handleChangeDescription}\r\n          />\r\n          <span id=\"about-input-error\" className=\"error\"></span>\r\n          \r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import { useRef } from 'react'\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const avatarLink = useRef();\r\n    \r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar({avatar: avatarLink.current.value})\r\n\r\n    }\r\n    return (\r\n        <PopupWithForm\r\n          title=\"Обновить аватар\"\r\n          name=\"avatar\"\r\n          isOpen={props.isOpen}\r\n          onClose={props.onClose}\r\n          onSubmit={handleSubmit}\r\n          buttonText='Сохранить'\r\n        >\r\n          <input\r\n            id=\"avatar-link-input\"\r\n            className=\"popup__input popup__input_type_link\"\r\n            type=\"url\"\r\n            name=\"avatar\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            autoComplete=\"off\"\r\n            required\r\n            ref={avatarLink}\r\n          />\r\n          <span id=\"avatar-link-input-error\" className=\"error\"></span>\r\n          \r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [placeName, setPlaceName] = React.useState(\"\");\r\n  const [placeLink, setPlaceLink] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    setPlaceLink(\"\");\r\n    setPlaceName(\"\");\r\n  }, [props.isOpen]);\r\n\r\n  function handlePlaceName(e) {\r\n    setPlaceName(e.target.value);\r\n  }\r\n\r\n  function handlePlaceLink(e) {\r\n    setPlaceLink(e.target.value);\r\n  }\r\n\r\n  function handleAddPlaceSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: placeName,\r\n      link: placeLink,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleAddPlaceSubmit}\r\n      buttonText=\"Сохранить\"\r\n    >\r\n      <input\r\n        id=\"img-title-input\"\r\n        className=\"popup__input popup__input_type_title\"\r\n        type=\"text\"\r\n        name=\"name\"\r\n        placeholder=\"Название\"\r\n        maxLength=\"30\"\r\n        minLength=\"2\"\r\n        autoComplete=\"off\"\r\n        onChange={handlePlaceName}\r\n        value={placeName}\r\n      />\r\n      <span id=\"img-title-input-error\" className=\"error\"></span>\r\n      <input\r\n        id=\"img-link-input\"\r\n        className=\"popup__input popup__input_type_link\"\r\n        type=\"url\"\r\n        name=\"link\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        autoComplete=\"off\"\r\n        required\r\n        onChange={handlePlaceLink}\r\n        value={placeLink}\r\n      />\r\n      <span id=\"img-link-input-error\" className=\"error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","function InfoTooltip(props) {\r\n  const statusClassName = `popup-register-status__img ${\r\n    props.isSuccessStatus\r\n      ? \"popup-register-status__img_ok\"\r\n      : \"popup-register-status__img_wrong\"\r\n  }`;\r\n  return (\r\n    <div\r\n      className={`popup popup-${props.name} ${props.isOpen && \"popup_opened\"}`}\r\n    >\r\n      <div className=\"popup__content\">\r\n        <div className={statusClassName}></div>\r\n        <p className=\"popup__title popup__title_register\">\r\n          {props.isSuccessStatus\r\n            ? \"Вы успешно зарегистрировались!\"\r\n            : \"Что-то пошло не так! Попробуйте еще раз.\"}\r\n        </p>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close-btn\"\r\n          onClick={props.onClose}\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","class Api {\r\n  constructor({ url, headers }) {\r\n    this._url = url;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n  }\r\n\r\n  getAllInfo() {\r\n    return Promise.all([this.getUserInfo(), this.getCards()]);\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n      credentials: \"include\"\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  addCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link,\r\n      }),\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n  \r\n  setUserInfo({ name, about }) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  addLike(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  delLike(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  \r\n  newAvatar({ avatar }) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n      credentials: \"include\",\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst config = {\r\n  url: \"http://mesto.arti.nomoredomains.club\",\r\n  headers: {\r\n    Accept: \"application/json\",\r\n    \"Content-type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst api = new Api(config);\r\nexport default api;\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({component: Component, ...props}) => {\r\n  return (\r\n    <Route>\r\n      {() => props.loggedIn ? <Component {...props}/> : <Redirect to=\"/signin\" />}\r\n      </Route>\r\n)};\r\n\r\nexport default ProtectedRoute;","export const BASE_URL = \"http://mesto.arti.nomoredomains.club\";\r\n\r\nexport const checkResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}`);\r\n};\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n    credentials: \"include\",\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nexport const checkToken = () => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    credentials: \"include\",\r\n  })\r\n    .then((res) => checkResponse(res))\r\n    .then((data) => data);\r\n};\r\n\r\nexport const logOut = () => {\r\n  return fetch(`${BASE_URL}/logOut`, {\r\n    method: \"HEAD\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    credentials: \"include\",\r\n  }).then((res) => {\r\n    if(res.ok) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  })\r\n};\r\n","import React from \"react\";\r\nimport { Route, Switch, withRouter, useHistory } from \"react-router-dom\";\r\nimport Header from \"./Header.js\";\r\nimport Main from \"./Main.js\";\r\nimport Login from \"./Login.js\";\r\nimport Register from \"./Register.js\";\r\nimport Footer from \"./Footer.js\";\r\nimport ImagePopup from \"./ImagePopup.js\";\r\nimport EditProfilePopup from \"./EditProfilePopup.js\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup.js\";\r\nimport AddPlacePopup from \"./AddPlacePopup.js\";\r\nimport InfoTooltip from \"./InfoTooltip.js\";\r\nimport api from \"../utils/api.js\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext.js\";\r\nimport ProtectedRoute from \"./ProtectedRoute.js\";\r\nimport * as auth from \"../utils/auth.js\";\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\r\n    React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\r\n    React.useState(false);\r\n\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setUserInfo] = React.useState({});\r\n\r\n  // ПЕРЕМЕННЫЕ РЕГИСТРАЦИИ\r\n  const [isRegisterSuccess, setIsRegisterSuccess] = React.useState(false); // статус регистрации\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false); // попап регистрации\r\n  const [currentUserEmail, setCurrentUserEmail] = React.useState(\"\");\r\n\r\n  // CARDS\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    checkToken();\r\n    updateUserInfo();\r\n  }, []);\r\n\r\n  function checkToken() {\r\n    auth\r\n      .checkToken()\r\n      .then((res) => {\r\n        if (res) {\r\n          setLoggedIn(true);\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  function updateUserInfo() {\r\n    api\r\n      .getAllInfo()\r\n      .then(([userData, cards]) => {\r\n        setUserInfo(userData.data);\r\n        setCards(cards.data);\r\n        setCurrentUserEmail(userData.data.email);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  // РАБОТА С ПОПАПАМИ\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(data) {\r\n    setSelectedCard(data);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsInfoTooltipOpen(false);\r\n    setSelectedCard(null);\r\n  }\r\n\r\n  function handleUpdateUser(name, about) {\r\n    api\r\n      .setUserInfo({ name: name, about: about })\r\n      .then((userData) => {\r\n        setUserInfo(userData.data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api\r\n      .newAvatar(avatar)\r\n      .then((res) => {\r\n        setUserInfo(res.data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then((res) => {\r\n        setCards((state) => state.filter((c) => c._id !== card._id));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n    if (isLiked) {\r\n      api\r\n        .delLike(card._id)\r\n        .then((newCard) => {\r\n          setCards((state) =>\r\n            state.map((c) => (c._id === card._id ? newCard : c))\r\n          );\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      api\r\n        .addLike(card._id)\r\n        .then((newCard) => {\r\n          setCards((state) =>\r\n            state.map((c) => (c._id === card._id ? newCard : c))\r\n          );\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  function onAddPlace(data) {\r\n    api\r\n      .addCard(data)\r\n      .then((newCard) => {\r\n        closeAllPopups();\r\n        setCards([newCard, ...cards]);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  // РАБОТА С АВТОРИЗАЦИЕЙ\r\n\r\n  const history = useHistory();\r\n\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n\r\n  function handleAuthorization(password, email) {\r\n    auth\r\n      .authorize(password, email)\r\n      .then((data) => {\r\n        setLoggedIn(true);\r\n        history.push(\"/\");\r\n        updateUserInfo();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // ВЫХОД ИЗ ПРОФИЛЯ\r\n\r\n  function handleSignOut() {\r\n    auth\r\n      .logOut()\r\n      .then((res) => {\r\n        if (res) {\r\n          history.push(\"/signin\");\r\n          setLoggedIn(false);\r\n          setCurrentUserEmail(\"\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  // РЕГИСТРАЦИЯ\r\n\r\n  function handleRegistration(password, email) {\r\n    auth\r\n      .register(password, email)\r\n      .then((res) => {\r\n        setIsRegisterSuccess(true);\r\n        history.push(\"/signin\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setIsRegisterSuccess(false);\r\n      })\r\n      .finally(() => {\r\n        setIsInfoTooltipOpen(true);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header\r\n          isLoggedIn={loggedIn}\r\n          email={currentUserEmail}\r\n          onSignOut={handleSignOut}\r\n        />\r\n        <Switch>\r\n          <Route path=\"/signin\">\r\n            <Login onSubmit={handleAuthorization} />\r\n          </Route>\r\n          <Route path=\"/signup\" isOpen={isInfoTooltipOpen}>\r\n            <Register onSubmit={handleRegistration} />\r\n          </Route>\r\n          <ProtectedRoute\r\n            path=\"/\"\r\n            loggedIn={loggedIn}\r\n            component={Main}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          ></ProtectedRoute>\r\n        </Switch>\r\n        <Footer />\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          isSuccessStatus={isRegisterSuccess}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        ></EditAvatarPopup>\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={onAddPlace}\r\n        ></AddPlacePopup>\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        ></EditProfilePopup>\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups}></ImagePopup>\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App.js';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n  \r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}